<div class="mx-auto mt-10 flex w-full max-w-full flex-col items-center justify-center">
  <!-- Tabs -->
  <div class="mb-8 flex max-w-6xl min-w-3xl justify-around">
    @for (item of tabs; let i = $index; track $index) {
      <div
        class="flex w-full items-center justify-center"
        [class]="i == 1 ? 'border-gray-custom border-x' : ''"
      >
        <button
          class="border-b-2 px-6 py-3 text-lg font-medium transition-all"
          [class.border-green-600]="activeTab() === item"
          [class.border-white]="activeTab() != item"
          [class.text-green-600]="activeTab() === item"
          (click)="activeTab.set(item)"
        >
          {{ item }}
        </button>
      </div>
    }
  </div>
  @if (activeTab() === 'Overview') {
    <div class="grid grid-cols-1 gap-10 lg:grid-cols-8">
      <div class="flex items-center gap-4 lg:flex-col">
        <div
          *ngFor="let img of product.productOverView.extraProductImages"
          class="flex h-20 w-20 cursor-pointer items-center justify-center overflow-hidden rounded-lg border transition-all"
          [class.border-green-custom]="selectedImage() === img"
          (click)="changeImage(img)"
        >
          <img [src]="img" class="h-full object-contain" />
        </div>
      </div>

      <div class="col-span-3 flex w-full items-center rounded-xl border p-4">
        <img [src]="selectedImage()" class="h-full object-contain" />
      </div>

      <!-- Right: Product Description -->
      <div class="col-span-4">
        <h2 class="mb-4 text-2xl font-bold text-green-700">Product Description</h2>

        <p class="mb-6 leading-relaxed text-gray-700">
          {{ product.description }}
        </p>

        <div *ngFor="let group of product.productOverView.otherDetails | keyvalue" class="mb-6">
          <h3 class="mb-2 text-lg font-semibold">{{ group.key }}</h3>

          <ul
            class="ml-5 space-y-1 text-gray-700"
            [class]="
              product.productOverView.otherDetailPointType == 'Number'
                ? 'list-decimal'
                : 'list-disc'
            "
          >
            <li *ngFor="let point of group.value">{{ point }}</li>
          </ul>
        </div>

        <!-- Download Button -->
        <button
          pButton
          label="Download"
          class="rounded-lg border-none bg-green-600 px-5 py-2 text-white"
        ></button>
      </div>
    </div>
  } @else if (activeTab() === 'Specs') {
    <div class="flex items-center justify-center">
      <h2 class="text-green-custom mb-4 text-3xl font-bold">{{ product.specs.images.title }}</h2>
    </div>
    <div class="flex items-center justify-center">
      <img [src]="product.specs.images.image" class="max-h-[450px] object-contain" />
    </div>
  } @else if (activeTab() === 'Accessories') {
    <div class="w-full space-y-4">
      @for (item of product.accesories; track $index) {
        <div class="grid grid-cols-3 items-center border p-4">
          <!-- Left: Title -->
          <div class="text-lg font-semibold text-green-700">
            {{ item.title }}
          </div>

          <!-- Middle: Bullet Points -->
          <ul class="col-span-1 space-y-1">
            @for (point of item.points; track point) {
              <li class="ml-5 list-disc text-sm">
                {{ point }}
              </li>
            }
          </ul>

          <!-- Right: Image -->
          <div class="flex justify-center">
            <img [src]="item.image" class="max-h-32 object-contain" />
          </div>
        </div>
      }
    </div>
  }

  <div class="my-10 w-full">
    <!-- When bottomDescription is a string -->
    <div *ngIf="isString(product.bottomDescription)">
      <p class="px-4 text-center leading-relaxed text-gray-700">
        {{ product.bottomDescription }}
      </p>
    </div>

    <!-- When bottomDescription is an object -->
    <div *ngIf="isObject(product.bottomDescription)" class="mx-auto max-w-4xl">
      <h2 class="mb-4 text-center text-2xl font-bold text-green-700">
        {{ product.bottomDescription.title }}
      </h2>

      <ul class="ml-6 list-disc space-y-2 text-gray-700">
        <li *ngFor="let point of product.bottomDescription.points">
          {{ point }}
        </li>
      </ul>
    </div>
  </div>
  <div class="mt-10 flex w-full flex-col items-center">
    <!-- Title -->
    <h2 class="mb-4 text-xl font-bold text-gray-800 md:text-2xl">
      {{ product.footprintTitle }}
    </h2>

    <!-- Box container -->
    <div
      class="flex w-full max-w-4xl justify-center rounded-md border border-gray-400 bg-white p-4 shadow-sm"
    >
      <p-image
        [src]="product.footprint"
        [alt]="product.footprintTitle"
        class="max-h-[420px] w-full object-contain"
      ></p-image>
    </div>
  </div>
</div>
